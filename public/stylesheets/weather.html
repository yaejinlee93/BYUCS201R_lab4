<!DOCTYPE HTML>
<html>
  <head>
    <title>City Finder</title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>

  </head>
  <body>
    <form>
      Enter A Utah City: <input type="text" id="cityField" value=""><br>
      Suggestion: <span id="txtHint">Empty</span>
    </form>

    Search a word: <input type="text" id="searchWord" value=""><br>
    Result: <span id="searchResults">Empty</span>
    <input id="searchButton" type="submit" value="Submit">

    <script>
      $(document).ready(function()
      {
        $( "#cityField" ).keyup(function()
        {
          var url = "http://bioresearch.byu.edu/cs260/jquery/getcity.cgi?q="+$("#cityField").val();
          $.getJSON(url,function(data)
          {
             var everything;
             everything = "<ul>";
             $.each(data, function(i,item)
             {
               everything += "<li> "+data[i].city;
             });
             everything += "</ul>";
             $("#txtHint").html(everything);
         })

         .done(function()
         {
           console.log('getJSON request succeeded!');
         })
         .fail(function(jqXHR, textStatus, errorThrown)
         {
           console.log('getJSON request failed! ' + textStatus);
           console.log("incoming "+jqXHR.responseText);
         })
         .always(function()
         {
           console.log('getJSON request ended!');
         })
         .complete(function()
         {
           console.log("complete");
         });
       });

       $("#searchButton").click(function(){
         var url="http://ec2-54-202-120-32.us-west-2.compute.amazonaws.com:3000/word?word="+$("#searchWord").val();
         $.getJSON(url,function(data){
           var $words;
           $words=$("<ul>");
           $.each(data,function(i,item){
             $words.append($("<li>").append("Type: ").append(data[i].type).append(", Defenition: ").append(data[i].defenition).append(", Example: ").append(data[i].example));
             });
           $("#searchResults").html($words);
         }).done(function(){
         console.log('getJSON request succeeded!');
         }).fail(function(jqXHR,textStatus,errorThrown){
           console.log('getJSON request failed! '+textStatus);
           console.log("incoming "+jqXHR.responseText);
         }).always(function(){
           console.log('getJSON request ended!');
         }).complete(function(){
           console.log("complete");
         });
       });

     });


    </script>

  </body>
</html>
